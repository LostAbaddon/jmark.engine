if(function(){var a=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),b=!a&&"undefined"!=typeof importScripts,c=!a&&!b&&"undefined"!=typeof process,d=a&&!b&&"undefined"!=typeof phantom,e=null;a?e=window:b?e=this:c?e=global:d&&(e=phantom),e.DOM||(e.DOM={browser:a,webworker:b,node:c,phantom:d}),e.ROOT||(e.ROOT=e);var f;e.NameSpace||(f={},e.NameSpace=function(a){a=a.toUpperCase().replace(/\.\\/g,"/").split("/");var b,c,d=a.length,e=f;for(b=0;d>b;b++)c=a[b].trim(),0!==c.length&&(e[c]||(e[c]={}),e=e[c]);return e})}(),function(){function a(){d={};var a,b=g.length;for(a=0;b>a;a++)d[g[a]]=a}function b(){h={};var a,b=i.length;for(a=0;b>a;a++)h[i[a]]=a}function c(a,b,c){this.bra=a||"\n\n",this.ket=b||a,this.checker=c||k,this.isBraReg=this.bra instanceof RegExp,this.isKetReg=this.ket instanceof RegExp,this.invoked=!1,this.posBra=-1,this.posKet=-1}var d,e=NameSpace("jmark/parser"),f=!1,g=["normal"];a();var h,i=["block","orderlist","unorderlist","blockquote","pre","code","table","contenttable","header","footnoteContent"];b();var j={result:!0},k=function(){return j},l=function(a,b){this.text=a,this.para=b||null};l.prototype={convert:function(){var a=new m;return null!==this.para&&this.para.replaceNode(this,a),a.addNode(this),a}};var m=function(a,b){this.content=[],this.style=b||d.normal,this.para=a||null};m.prototype={addNode:function(a,b){var c=this.content.length;return isNaN(b)||0>b||b>=c?this.content.push(a):this.content.splice(b,0,a),a.para=this,this},removeNode:function(a){var b=this.content.indexOf(a);return b>=0&&(this.content.splice(b,1),a.para=null),this},replaceNode:function(a,b){var c=this.content.indexOf(a);c>=0&&(this.content.splice(c,1,b),a.para=null,b.para=this)}},e.apply=function(a){var b=new l(a).convert();console.log(b)},e.invokeLineNumber=function(){f=!0},e.revokeLineNumber=function(){f=!1},e.TagRule=c,e.Style={},e.Style.addTextStyle=function(b,c,d){g.indexOf(b)<0&&(g.push(b),d||a())},e.Style.removeTextStyle=function(b,c){b=g.indexOf(b),b>=0&&(g.splice(b,1),c||a())},e.Style.addTextStyle("bold",new c("**"),!1),e.Style.addTextStyle("bold",new c("*"),!1),e.Style.addTextStyle("italic",new c("_"),!1),e.Style.addTextStyle("underscore",new c("__"),!1),e.Style.addTextStyle("strike",new c("--"),!1),e.Style.addTextStyle("sup",new c("^"),!1),e.Style.addTextStyle("sub",new c("~"),!1),e.Style.addTextStyle("big",new c("^^"),!1),e.Style.addTextStyle("small",new c("~~"),!1),e.Style.addTextStyle("link",new c(/\[([^^][\w\W]*?)\] ?\(([\w\W]*?)\)/i,"",function(a,b,c){return{result:!0,text:b,url:c}}),!1),e.Style.addTextStyle("link",new c(/!\[([^^][\w\W]*?)\] ?\(([\w\W]*?)\)/i,"",function(a,b,c){return{result:!0,caption:b,url:c}}),!1)}(),function(){var a=NameSpace("jmark/parser"),b=(NameSpace("jmark/render"),function(b){a.apply(b)});DOM.node||DOM.phantom?module.exports=b:ROOT.jmark=b}(),DOM.node){var fs=require("fs");fs.readFile("./test.md",function(a,b){b=b.toString(),module.exports(b)})}